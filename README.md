Необхідно виконати обробку даних, що полягає у виконанні деяких
обчислювальних кроків, надалі просто обчислень.
Усі обчислення реалізовані бібліотекою (розробляється підрядником) у вигляді
синхронних функцій і можуть бути умовно поділені на “повільні” та “швидкі”.
Наприклад, запити даних, що знаходяться на зовнішніх ресурсах,
виконуватимуться довше ніж проста локальна обробка даних. Тому запити зовнішніх
даних можна вважати “повільними”, а локальну просту обробку даних, що працює з
лінійним часом, -- “швидкою”.
Між обчисленнями є певна упорядкованість. Деякі обчислення потребують, щоб
вже були завершені деякі інші обчислення та отримані їх результати. Якщо для
обчислення В треба дочекатися завершення обчислення А, то будемо казати, що В
залежить від А. При цьому будемо за умовчанням вважати, що якщо С залежить від
В, а В залежить від А, то тоді і С залежить від А (тобто відношення “залежить від” є
транзитивним). Якщо між обчисленнями А та В залежностей нема, то їх можна
виконувати в довільній послідовності (спочатку А, потім В, чи навпаки) або
одночасно.
Нехай запис A(B,C) позначає, що обчислення А залежить від обчислень В та С.
Для кожного варіанту задається
– перелік обчислень, які мають бути виконані;
– які з цих обчислень є “повільними” (решта є “швидкими”)
– залежності між обчисленнями (ті, що отримуються за транзитивністю можуть не
наводитись).
Розробити схему виконання (що, в якому потоці та в якій послідовності
виконується), яка в оптимальний спосіб виконує весь комплекс зазначених у варіанті
обчислень.
Під оптимальністю мається на увазі, що
1) загальний час роботи у середньому має бути мінімальним;
Вважаємо, що “повільні” обчислення в середньому виконуються 7 секунд, а
“швидкі” – 1 секунду. Також вважаємо, що основні витрати часу йдуть на виконання
обчислень і нехтуємо допоміжними операціями.
2) за досягнення мінімального часу роботи одночасно працює якомога менше
потоків;
3) за виконання попередніх умов бажано мінімізувати кількість запусків потоків
(тут вже в кого як вийде, бо варіанти різні).
Написати функцію work, що виконує обчислення згідно розробленої схеми і, коли
все виконано виводить на консоль час виконання в секундах та повідомлення Work
is done!. Для спрощення моделювання вважати, що
1) “повільне” обчислення name виконується функцією slow(const string&amp; name),
що спочатку засипає на 7 секунду, а потім виводить на консоль name
2) “швидке” обчислення name виконується функцією quick(const string&amp; name),
що спочатку засипає на 1 секунду, а потім виводить на консоль name
Замість цих двох функцій можна зробити одну універсальну, що додатково
приймає тривалість у секундах.
Не забуваємо, що вихідний потік слід синхронізувати, osyncstream на допомогу.

Для запуску обчислень в іншому потоці слід використовувати засоби з бібліотеки
&lt;future&gt;. Засоби з інших “асинхронних” стандартних та сторонніх бібліотек
використовувати забороняється.
Написати програму, що демонструє роботу функції work.
Здається: код, скріншот з результатом виконання, малюнок з схематичним
зображенням послідовності обчислень, розподілу обчислень по потоках та точок
синхронізації (або фото рукописного, або як діаграму у графічному форматі).
Приклад. Необхідно виконати обчислення A, B, C, D. “Повільним” є В. Задано
залежності: B(A), D(B,C).
За заданих явно залежностей B(A), D(B,C) наявна ще залежність D(A), що
випливає з попередніх, тому D та A одночасно виконувати не можна.
Якщо кожне обчислення запускати в окремому потоці з відповідною
синхронізацією, то це буде мінімізувати час. Але при цьому буде одночасно запущено
5 потоків (головний та ще для виконання A, B, C, D). Кількість потоків тут явно можна
мінімізувати (достатньо 2 потоків) за того ж часу виконання задачі в цілому
(приблизно 1+7+1 секунд у середньому). Більш того, крім основного потоку виконання
достатньо запустити тільки один додатковий потік.

№9.
Усі обчислення: A,B,C1,C2,D1,D2,F
“Повільні” обчислення:A,B
Залежності: B(A), C1(B), D1(C1,C2),F(D1,D2)
